<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Twilio Player iOS SDK  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="Twilio Player iOS SDK  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Twilio Player iOS SDK 1.0.0-preview7 Docs</a></p>
        <p class="header-right"><a href="https://github.com/twilio/twilio-player-ios"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Twilio Player iOS SDK Reference</a>
        <img id="carat" src="img/carat.png" />
        Twilio Player iOS SDK  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/TPLPlayer.html">TPLPlayer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLPlayerQuality.html">TPLPlayerQuality</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLPlayerStats.html">TPLPlayerStats</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLPlayerView.html">TPLPlayerView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetry.html">TPLTelemetry</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryData.html">TPLTelemetryData</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataConnection.html">TPLTelemetryDataConnection</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataConnectionConnected">TPLTelemetryDataConnectionConnected</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataConnectionConnecting">TPLTelemetryDataConnectionConnecting</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataConnectionDisconnected">TPLTelemetryDataConnectionDisconnected</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataConnectionError.html">TPLTelemetryDataConnectionError</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataConnectionNetworkUnavailable">TPLTelemetryDataConnectionNetworkUnavailable</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlayback.html">TPLTelemetryDataPlayback</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackError.html">TPLTelemetryDataPlaybackError</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataPlaybackMuted">TPLTelemetryDataPlaybackMuted</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataPlaybackPaused">TPLTelemetryDataPlaybackPaused</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataPlaybackPlayed">TPLTelemetryDataPlaybackPlayed</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackQuality.html">TPLTelemetryDataPlaybackQuality</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackQualityChanged.html">TPLTelemetryDataPlaybackQualityChanged</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackQualityHighLatencyReductionApplied.html">TPLTelemetryDataPlaybackQualityHighLatencyReductionApplied</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataPlaybackQualityHighLatencyReductionReverted">TPLTelemetryDataPlaybackQualityHighLatencyReductionReverted</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackQualitySet.html">TPLTelemetryDataPlaybackQualitySet</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackQualitySummary.html">TPLTelemetryDataPlaybackQualitySummary</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackQualityVideoSizeChanged.html">TPLTelemetryDataPlaybackQualityVideoSizeChanged</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataPlaybackRebuffering">TPLTelemetryDataPlaybackRebuffering</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackState.html">TPLTelemetryDataPlaybackState</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackStateChanged.html">TPLTelemetryDataPlaybackStateChanged</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/c:objc(cs)TPLTelemetryDataPlaybackUnmuted">TPLTelemetryDataPlaybackUnmuted</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataPlaybackVolumeSet.html">TPLTelemetryDataPlaybackVolumeSet</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTelemetryDataTimedMetadataReceived.html">TPLTelemetryDataTimedMetadataReceived</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTimedMetadata.html">TPLTimedMetadata</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TPLTimedMetadataTelemetry.html">TPLTimedMetadataTelemetry</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Constants.html#/c:@kTPLErrorDomain">kTPLErrorDomain</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/TPLError.html">TPLError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TPLLogLevel.html">TPLLogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TPLPlayerState.html">TPLPlayerState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/TPLPlayerDelegate.html">TPLPlayerDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/TPLTelemetrySubscriber.html">TPLTelemetrySubscriber</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Type%20Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Type%20Definitions.html#/c:TPLTelemetry.h@T@TPLTelemetryPredicate">TPLTelemetryPredicate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='twilio-player-sdk-for-ios' class='heading'>Twilio Player SDK for iOS</h1>
<h2 id='about' class='heading'>About</h2>

<p>The Twilio Player iOS SDK lets you play a stream in your native iOS application.</p>

<p><strong>We want your feedback!</strong> Email <a href="mailto:video-product@twilio.com">video-product@twilio.com</a> with suggested improvements, feature requests and general feedback, or feel free to open a GitHub issue. If you need technical support, contact <a href="mailto:help@twilio.com">help@twilio.com</a>.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>The SDK can be integrated either manually, or via Swift Package Manager or CocoaPods. Please see more detailed installation instructions <a href="https://www.twilio.com/docs/media/ios-platform-overview#add-the-sdk">here</a>.</p>
<h2 id='usage' class='heading'>Usage</h2>

<p>The following snippets provide demonstrations on how to use the Player iOS SDK in an app. Get up and running with our <a href="https://github.com/twilio/twilio-audio-live-streaming-app-ios">demo app</a>. For more details about streaming content, visit the <a href="https://www.twilio.com/docs/media">Programmable Media documentation</a>.</p>
<h2 id='connecting-a-player-and-handling-events' class='heading'>Connecting a Player and Handling Events</h2>

<p>You can connect to a stream with an Access Token using the <code>Player.connect(accessToken:delegate:)</code> API. The connect API returns a <code>Player</code> object in <code>connecting</code> state. You can receive the Player events by passing a <code>PlayerDelegate</code> to the connect API.</p>
<h3 id='avaudiosession-configuration' class='heading'>AVAudioSession Configuration</h3>

<p>Before connecting to a stream, set the <code>AVAudioSession.category</code> to <code>playback</code> and activate the <code>AVAudioSession</code>.</p>
<pre class="highlight swift"><code><span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">AVAudioSession</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">setCategory</span><span class="p">(</span><span class="o">.</span><span class="n">playback</span><span class="p">)</span>
    <span class="k">try</span> <span class="kt">AVAudioSession</span><span class="o">.</span><span class="nf">sharedInstance</span><span class="p">()</span><span class="o">.</span><span class="nf">setActive</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"‼️ Could not setup AVAudioSession: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='connect-to-a-stream' class='heading'>Connect to a stream</h3>

<p>Once your app acquires a Twilio access token, you can connect to a stream.</p>

<p><br/></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">player</span> <span class="o">=</span> <span class="kt">Player</span><span class="o">.</span><span class="nf">connect</span><span class="p">(</span><span class="nv">accessToken</span><span class="p">:</span> <span class="s">"access token"</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>

<span class="kd">extension</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">PlayerDelegate</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">playerDidChangePlayerState</span><span class="p">(</span><span class="nv">player</span><span class="p">:</span> <span class="kt">Player</span><span class="p">,</span> <span class="n">playerState</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">Player</span><span class="o">.</span><span class="kt">State</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">player</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">connecting</span><span class="p">:</span>
                <span class="cm">/**
                 * The player is connecting to to Twilio Media Service.
                 */</span>
            <span class="k">break</span>

        <span class="k">case</span> <span class="o">.</span><span class="nv">idle</span><span class="p">:</span>
                <span class="cm">/**
                 * The player has successfully authenticated and is loading the stream. This
                 * state is also reached as a result of calling player.pause().
                 */</span>
            <span class="k">break</span>

        <span class="k">case</span> <span class="o">.</span><span class="nv">ready</span><span class="p">:</span>
                <span class="cm">/**
                 * The player is ready to playback the stream.
                 */</span>
            <span class="k">break</span>

        <span class="k">case</span> <span class="o">.</span><span class="nv">buffering</span><span class="p">:</span>
                <span class="cm">/**
                 * The player is buffering content.
                 */</span>
            <span class="k">break</span>

        <span class="k">case</span> <span class="o">.</span><span class="nv">playing</span><span class="p">:</span>
                <span class="cm">/**
                 * The player is now playing a stream. This state occurs as a result of calling
                 * player.play().
                 */</span>
            <span class="k">break</span>

        <span class="k">case</span> <span class="o">.</span><span class="nv">ended</span><span class="p">:</span>
                <span class="cm">/**
                 * The stream has ended.
                 */</span>
            <span class="k">break</span>

        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">playerDidFailWithError</span><span class="p">(</span><span class="nv">player</span><span class="p">:</span> <span class="kt">Player</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">)</span> <span class="p">{</span>
         <span class="cm">/**
         * An error occurred connecting the player or loading a stream.
         */</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='managing-playback' class='heading'>Managing Playback</h3>

<p>The following snippets demonstrate how to manage playback in your app.</p>

<p><br/></p>
<pre class="highlight swift"><code><span class="cm">/**
 * Once the Player reaches the `.ready` state after initially calling 
 * Player.connect(...), an application can invoke play(). The player will then transition to 
 * the `.playing` state once playback successfully begins.
 * 
 * play() can also be called during the `.idle` state only after transitioning as a result
 * of calling pause().
 */</span>
<span class="n">player</span><span class="o">.</span><span class="nf">play</span><span class="p">()</span>

<span class="cm">/**
 * To pause playback, invoke pause(). The player will transition to `.idle`
 * until playback is resumed with a subsequent call to play().
 */</span>
<span class="n">player</span><span class="o">.</span><span class="nf">pause</span><span class="p">()</span>

<span class="cm">/**
 * Playback audio can be muted by updating the muted property.
 */</span>
<span class="n">player</span><span class="o">.</span><span class="n">muted</span> <span class="o">=</span> <span class="kc">true</span>

<span class="cm">/**
 * The playback volume can also be adjusted. Updating the muted property has no effect
 * on the volume property. Once a stream is un-muted, playback will ensue with the last set
 * player volume.
 */</span>
<span class="n">player</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="mf">0.25</span>
</code></pre>
<h3 id='using-timedmetadata' class='heading'>Using TimedMetadata</h3>

<p>When your application inserts <a href="https://www.twilio.com/docs/media/timedmetadata-resource">TimedMetadata</a>
into a stream, the player will emit the <code>playerDidReceiveTimedMetadata</code> callback if the player is in the 
<code>.playing state</code>. <code>TimedMetadata</code> will not be received if the player is paused and any data
inserted while a player is paused will not be received once the player is resumed.</p>

<p><br/></p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">playerDidReceiveTimedMetadata</span><span class="p">(</span><span class="nv">player</span><span class="p">:</span> <span class="kt">Player</span><span class="p">,</span> <span class="nv">metadata</span><span class="p">:</span> <span class="kt">TimedMetadata</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Received time metadata = </span><span class="se">\(</span><span class="n">metadata</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='playing-a-stream-in-background' class='heading'>Playing a stream in background</h3>

<p>When the SDK is playing a stream, the Player SDK will continue playing audio when the app backgrounded if the app&rsquo;s <code>.plist</code> file supports <code>audio</code> background mode.</p>
<pre class="highlight plaintext"><code>&lt;key&gt;UIBackgroundModes&lt;/key&gt;
&lt;array&gt;
    &lt;string&gt;audio&lt;/string&gt;
&lt;/array&gt;
</code></pre>

<p>If you are rendering a stream using <code>PreviewView</code>, to continue audio in when the app is backgrounded you should reset <code>previewView.player</code> when the app goes to background.</p>
<pre class="highlight swift"><code><span class="kd">@objc</span> <span class="kd">private</span> <span class="kd">func</span> <span class="nf">applicationDidEnterBackground</span><span class="p">(</span><span class="nv">notification</span><span class="p">:</span> <span class="kt">Notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">playerView</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="kd">@objc</span> <span class="kd">private</span> <span class="kd">func</span> <span class="nf">applicationDidBecomeActive</span><span class="p">(</span><span class="nv">notification</span><span class="p">:</span> <span class="kt">Notification</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">playerView</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">player</span>
<span class="p">}</span>
</code></pre>
<h4 id='telemetry' class='heading'>Telemetry</h4>

<p>The Telemetry API enables applications to subscribe to event and metric data collected by the Player SDK. Telemetry data emitted by the Player SDK can be used to track stream quality, triage issues, and better understand your application&rsquo;s Player SDK usage.</p>
<h5 id='typed-data-events' class='heading'>Typed Data Events</h5>

<p>The Player SDK represents telemetry data as strongly typed classes. Reference the table below for a summary of the currently reported events.</p>

<table><thead>
<tr>
<th><strong>Telemetry Data</strong></th>
<th><strong>Reporting Details</strong></th>
</tr>
</thead><tbody>
<tr>
<td><code>TelemetryDataConnectionConnecting</code></td>
<td>Reported when <code>Player.connect(...)</code> is called</td>
</tr>
<tr>
<td><code>TelemetryDataConnectionConnected</code></td>
<td>Reported when the Player has a playback token</td>
</tr>
<tr>
<td><code>TelemetryDataConnectionNetworkUnavailable</code></td>
<td>Reported when <code>playerNetworkDidBecomeUnavailable</code> is invoked</td>
</tr>
<tr>
<td><code>TelemetryDataConnectionDisconnected</code></td>
<td>Reported when is <code>Player.dealloc()</code> is called</td>
</tr>
<tr>
<td><code>TelemetryDataConnectionError</code></td>
<td>Reported when <code>playerDidFailWithError</code> is invoked in the <code>.connecting</code> state</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackPlayed</code></td>
<td>Reported when <code>player.play()</code> is called</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackPaused</code></td>
<td>Reported when <code>player.pause()</code> is called</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackVolumeSet</code></td>
<td>Reported when <code>player.volume</code> is set</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackMuted</code></td>
<td>Reported when <code>player.muted</code> is set to <code>true</code></td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackUnmuted</code></td>
<td>Reported when <code>player.muted</code> is set to <code>false</code></td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackError</code></td>
<td>Reported when <code>playerDidFailWithError</code> is invoked in the following states: <code>.idle</code>, <code>.ready</code>, <code>.buffering</code>, <code>.playing</code></td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackRebuffering</code></td>
<td>Reported when <code>playerWillRebuffer</code> is invoked</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackQualitySummary</code></td>
<td>Reported every three seconds while the player is <code>.buffering</code> or <code>.playing</code> state</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackQualitySet</code></td>
<td>Reported when <code>player.quality</code> is set</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackQualityChanged</code></td>
<td>Reported when <code>playerdidChangeQuality</code> is invoked</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackQualityVideoSizeChanged</code></td>
<td>Reported when <code>playerVideoSizeChanged</code> is invoked</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackQualityHighLatencyReductionApplied</code></td>
<td>Reported when the SDK applies the low latency reduction strategy.</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackQualityHighLatencyReductionReverted</code></td>
<td>Reported when the SDK reverts the low latency reduction strategy.</td>
</tr>
<tr>
<td><code>TelemetryDataPlaybackStateChanged</code></td>
<td>&ldquo;</td>
</tr>
<tr>
<td><code>TelemetryDataTimedMetadataReceived</code></td>
<td>Reported when <code>playerDidReceiveTimedMetadata</code> is invoked</td>
</tr>
</tbody></table>
<h5 id='usage' class='heading'>Usage</h5>

<p>The following snippets demonstrate a few examples of how to use the Telemetry API.</p>

<p><em>Telemetry Logger</em></p>

<p>The following snippet demonstrates the simplest Telemetry example: Logging all Telemetry events
emitted by the Player SDK</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">log</span><span class="p">:</span> <span class="kt">OSLog</span> <span class="o">=</span> <span class="kt">OSLog</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">subsystem</span><span class="p">:</span> <span class="s">"com.example.logger"</span><span class="p">,</span> <span class="nv">category</span><span class="p">:</span> <span class="s">"CodeSnippet"</span><span class="p">)</span>

<span class="c1">// Subscribe the logger to events</span>
<span class="kt">Player</span><span class="o">.</span><span class="n">telemetry</span><span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">)</span>

<span class="kd">extension</span> <span class="kt">Subscriber</span><span class="p">:</span> <span class="kt">TelemetrySubscriber</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">didReceiveTelemetryData</span><span class="p">(</span><span class="n">_</span> <span class="nv">data</span><span class="p">:</span> <span class="kt">TelemetryData</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">os_log</span><span class="p">(</span><span class="s">"TELEMETRY : %@"</span><span class="p">,</span> <span class="nv">log</span><span class="p">:</span> <span class="n">log</span><span class="p">,</span>  <span class="nv">type</span><span class="p">:</span><span class="o">.</span><span class="k">default</span><span class="p">,</span> <span class="s">"</span><span class="se">\(</span><span class="n">data</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// .. When your app no longer wants telemetry data, unsubscribe</span>
<span class="kt">Player</span><span class="o">.</span><span class="n">telemetry</span><span class="o">.</span><span class="nf">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">)</span>

</code></pre>

<p><em>Track High Latency</em></p>

<p>The following snippet demonstrates an example of checking experience quality by tracking any instances of high latency.</p>
<pre class="highlight swift"><code>
<span class="kt">Player</span><span class="o">.</span><span class="n">telemetry</span><span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="nv">predicate</span><span class="p">:</span> <span class="p">{</span> <span class="n">data</span> <span class="k">in</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">summary</span> <span class="o">=</span> <span class="n">data</span> <span class="k">as?</span> <span class="kt">TelemetryDataPlaybackQualitySummary</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">summary</span><span class="o">.</span><span class="n">playerLiveLatency</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">3_000_000</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">})</span>

<span class="kd">extension</span> <span class="kt">Subscriber</span><span class="p">:</span> <span class="kt">TelemetrySubscriber</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">didReceiveTelemetryData</span><span class="p">(</span><span class="n">_</span> <span class="nv">data</span><span class="p">:</span> <span class="kt">TelemetryData</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">yourAppAnalytics</span><span class="o">.</span><span class="nf">track</span><span class="p">(</span><span class="s">"high-latency-detected"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p><em>Track Connection Errors</em></p>

<p>The following snippet demonstrates an example of using <code>TelemetryPredicate</code>&lsquo;s to filter on specific Telemetry events.</p>
<pre class="highlight swift"><code>
<span class="kt">Player</span><span class="o">.</span><span class="n">telemetry</span><span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="nv">predicate</span><span class="p">:</span> <span class="p">{</span> <span class="n">data</span> <span class="k">in</span>
    <span class="k">return</span> <span class="n">data</span> <span class="k">is</span> <span class="kt">TelemetryDataConnectionError</span> 
<span class="p">})</span>

<span class="kd">extension</span> <span class="kt">Subscriber</span><span class="p">:</span> <span class="kt">TelemetrySubscriber</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">didReceiveTelemetryData</span><span class="p">(</span><span class="n">_</span> <span class="nv">data</span><span class="p">:</span> <span class="kt">TelemetryData</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">yourAppAnalytics</span><span class="o">.</span><span class="nf">track</span><span class="p">(</span><span class="s">"connection-error-detected"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='threading-contract' class='heading'>Threading Contract</h3>

<p>The Player iOS SDK does not provide thread safety. Developers should use a <code>Player</code> instance 
from the main thread. All callbacks will be emitted on the main thread.</p>
<h2 id='need-help' class='heading'>Need help?</h2>

<p>Email <a href="mailto:help@twilio.com">help@twilio.com</a>, or open an issue in our <a href="https://github.com/twilio/twilio-player-ios/">GitHub Repository</a> and we’ll give you a hand.</p>

          </section>
        </section>
        <section id="footer">
          <p>Copyright © 2021 Twilio, Inc. All rights reserved.</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
